<app-modal 
  [isOpen]="isOpen" 
  (onClose)="handleClose()"
  [title]="editingUserId ? 'Editar Utilizador' : 'Adicionar Utilizador'"
>
  <form (ngSubmit)="handleSubmit()" class="space-y-4">
    <!-- Name Input -->
    <app-input
      label="Nome"
      [ngModel]="name()"
      (ngModelChange)="name.set($event)"
      name="name"
      [required]="true"
      [error]="errors['name']"
      [disabled]="isSubmitting"
    />

    <!-- Email Input -->
    <app-input
      label="Email"
      type="email"
      [ngModel]="email()"
      (ngModelChange)="email.set($event)"
      name="email"
      [required]="true"
      [error]="errors['email']"
      [disabled]="isSubmitting || !!editingUserId"
    />

    <!-- Phone Input -->
    <app-input
      label="Telefone"
      [ngModel]="phone()"
      (ngModelChange)="phone.set($event)"
      name="phone"
      [disabled]="isSubmitting"
    />

    <!-- Role Select -->
    <div class="space-y-1">
      <label class="text-sm font-medium text-slate-700 dark:text-slate-300">
        Perfil
      </label>
      <select
        [ngModel]="role()"
        (ngModelChange)="role.set($event)"
        name="role"
        class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"
        [disabled]="isSubmitting"
      >
        <option [value]="UserRole.USER">Funcion√°rio</option>
        <option [value]="UserRole.ADMIN">Administrador</option>
      </select>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-3 pt-4">
      <button
        type="submit"
        [disabled]="isSubmitting"
        class="flex-1 px-8 py-4 rounded-2xl font-bold text-[14px] transition-all flex items-center justify-center gap-3 disabled:opacity-50 bg-[#10b981] hover:bg-[#059669] text-white shadow-xl shadow-emerald-500/20"
      >
        @if (isSubmitting) {
          <app-loading-spinner size="sm" text="Salvando..." />
        } @else {
          {{ editingUserId ? 'Atualizar' : 'Criar Utilizador' }}
        }
      </button>
      <button
        type="button"
        (click)="handleClose()"
        [disabled]="isSubmitting"
        class="px-6 py-4 rounded-2xl font-bold text-[14px] transition-all flex items-center justify-center gap-3 disabled:opacity-50 bg-transparent text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"
      >
        Cancelar
      </button>
    </div>
  </form>
</app-modal>