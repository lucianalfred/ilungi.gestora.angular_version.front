<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full shadow-2xl">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-lg font-bold text-slate-900">Criar Nova Conta</h3>
      <button (click)="close.emit()" class="text-slate-400 hover:text-slate-600">
        <app-icon name="x" [size]="16"></app-icon>
      </button>
    </div>
    
    @if (registerSuccess()) {
      <div class="text-center py-8">
        <div class="w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <app-icon name="check-circle-2" [size]="32" class="text-emerald-600"></app-icon>
        </div>
        <h4 class="text-lg font-bold text-slate-900 mb-2">Conta Criada!</h4>
        <p class="text-slate-600">A redirecionar para o sistema...</p>
      </div>
    }@else {
      <form (ngSubmit)="onSubmit($event)" class="space-y-4">
        @if (registerError()) {
          <div class="p-3 bg-rose-50 border border-rose-200 rounded-lg">
            <p class="text-rose-700 text-sm">{{ registerError() }}</p>
          </div>
        }
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1.5">
            Nome Completo <span class="text-rose-500">*</span>
          </label>
          <input
            type="text"
            [ngModel]="formData().name"
            (ngModelChange)="handleInputChange('name', $event)"
            name="name"
            placeholder="Seu nome completo"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all"
            required
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1.5">
            Email <span class="text-rose-500">*</span>
          </label>
          <input
            type="email"
            [ngModel]="formData().email"
            (ngModelChange)="handleInputChange('email', $event)"
            name="email"
            placeholder="nome@empresa.com"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all"
            required
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1.5">
            Senha <span class="text-rose-500">*</span>
          </label>
          <input
            type="password"
            [ngModel]="formData().password"
            (ngModelChange)="handleInputChange('password', $event)"
            name="password"
            placeholder="MÃ­nimo 6 caracteres"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all"
            required
            minlength="6"
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1.5">
            Confirmar Senha <span class="text-rose-500">*</span>
          </label>
          <input
            type="password"
            [ngModel]="formData().confirmPassword"
            (ngModelChange)="handleInputChange('confirmPassword', $event)"
            name="confirmPassword"
            placeholder="Confirme sua senha"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all"
            required
          />
        </div>
        
        <app-button
          type="submit"
          [disabled]="isLoading()"
          class="w-full py-3"
        >
          @if (isLoading()) {
            <div class="flex items-center gap-2">
              <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
              A criar conta...
            </div>
          } @else {
            Criar Conta
          }
        </app-button>
        
        <button
          type="button"
          (click)="closeModal()"
          class="w-full py-2 text-slate-500 hover:text-slate-700 text-sm"
        >
          Cancelar
        </button>
      </form>
    }
  </div>
</div>